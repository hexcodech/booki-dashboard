webpackJsonp([2],{921:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(0),u=r(c),i=n(4),f=n(56),l=n(923),p=n(334),d=r(p),h=function(e){function t(){var e,n,r,a;o(this,t);for(var c=arguments.length,i=Array(c),p=0;p<c;p++)i[p]=arguments[p];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.componentDidMount=function(){var e=r.props,t=e.dispatch,n=e.accessToken;t((0,f.fetchUsersIfNeeded)(n))},r.handleRefreshClick=function(e){e.preventDefault();var t=r.props,n=t.dispatch,o=t.accessToken;n((0,l.invalidateUsers)()),n((0,f.fetchUsersIfNeeded)(o))},r.render=function(){var e=r.props.users,t=e.filter(function(e){return new Date(e.created).getTime()>=Date.now()-6048e5});return u.default.createElement(d.default,{handleRefreshClick:r.handleRefreshClick},u.default.createElement("p",null,e.length," Users registered"),u.default.createElement("small",null,t.length," within the last week"))},a=n,s(r,a)}return a(t,e),t}(u.default.Component),S=function(e){return{accessToken:e.app.authentication.accessToken.token,users:e.app.users}};t.default=(0,i.connect)(S)(h)},923:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchSystemStatsIfNeeded=t.invalidateSystemStats=void 0;var r=n(32),o=(t.invalidateSystemStats=function(){return{type:"INVALIDATE_SYSTEM_STATS"}},function(e){return{type:"REQUEST_SYSTEM_STATS",accessToken:e}}),s=function(e){return{type:"FAIL_SYSTEM_STATS_REQUEST",error:e}},a=function(e,t){return{type:"RECEIVE_SYSTEM_STATS",systemStats:e,receivedAt:t}},c=function(e){return function(t){return t(o(e)),(0,r.fetchApi)("system/stats","GET",{},e).then(function(e){t(a(e,Date.now()))}).catch(function(e){t(s(e)),t(push("/"))})}},u=function(e,t){var n=e.app.dashboard.systemStats;return!n.isFetching&&(0===n.lastUpdated||n.didInvalidate)};t.fetchSystemStatsIfNeeded=function(e){return function(t,n){return u(n())?t(c(e)):Promise.resolve()}}}});